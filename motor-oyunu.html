<!DOCTYPE html>
<html>
<head>
    <title>Motor Yarışı - TTMTAL</title>
    <style>
        body { margin: 0; background: #111; overflow: hidden; color: white; font-family: Arial; }
        canvas { display: block; margin: 20px auto; border: 4px solid #00ffcc; box-shadow: 0 0 20px #00ffcc; }
        .stats { text-align: center; font-size: 24px; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="stats">BÖLÜM: <span id="lvl">1</span> | SKOR: <span id="score">0</span></div>
    <canvas id="game"></canvas>

    <script>
        const canvas = document.getElementById("game");
        const ctx = canvas.getContext("2d");
        canvas.width = 400; canvas.height = 600;

        let level = 1;
        let score = 0;
        let gameSpeed = 5;
        let player = { x: 180, y: 500, w: 40, h: 70 };
        let enemies = [];

        // Hareket Kontrolü
        window.addEventListener("mousemove", (e) => {
            let rect = canvas.getBoundingClientRect();
            player.x = e.clientX - rect.left - player.w / 2;
        });

        function spawnEnemy() {
            let x = Math.random() * (canvas.width - 40);
            enemies.push({ x: x, y: -100, w: 40, h: 70, color: `hsl(${Math.random() * 360}, 70%, 50%)` });
        }

        function update() {
            if (Math.random() < 0.02 + (level * 0.005)) spawnEnemy();

            enemies.forEach((en, i) => {
                en.y += gameSpeed + (level * 0.5); // Her bölüm hızlanır

                // Çarpışma
                if (player.x < en.x + en.w && player.x + player.w > en.x &&
                    player.y < en.y + en.h && player.y + player.h > en.y) {
                    alert("KAZA YAPTIIN! Skor: " + score + " Bölüm: " + level);
                    location.reload();
                }

                if (en.y > canvas.height) {
                    enemies.splice(i, 1);
                    score++;
                    if (score % 10 === 0) {
                        level++;
                        document.getElementById("lvl").innerText = level;
                    }
                    document.getElementById("score").innerText = score;
                }
            });
        }

        function draw() {
            ctx.fillStyle = "#333";
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            
            // Yol Şeritleri
            ctx.strokeStyle = "white";
            ctx.setLineDash([20, 20]);
            ctx.beginPath(); ctx.moveTo(200, 0); ctx.lineTo(200, 600); ctx.stroke();

            // Oyuncu (Motor)
            ctx.fillStyle = "#00ffcc";
            ctx.fillRect(player.x, player.y, player.w, player.h);

            // Düşmanlar
            enemies.forEach(en => {
                ctx.fillStyle = en.color;
                ctx.fillRect(en.x, en.y, en.w, en.h);
            });

            update();
            requestAnimationFrame(draw);
        }
        draw();
    </script>
</body>
</html>
