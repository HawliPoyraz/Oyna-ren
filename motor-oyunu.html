<!DOCTYPE html>
<html>
<head>
    <title>TTMTAL - Extreme Motor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/matter-js/0.18.0/matter.min.js"></script>
    <style>
        body { margin: 0; background: #000; overflow: hidden; font-family: 'Arial', sans-serif; }
        #ui { position: absolute; top: 20px; left: 20px; color: #0f0; font-size: 20px; text-shadow: 2px 2px #000; }
        canvas { display: block; }
    </style>
</head>
<body>
    <div id="ui">OK TUŞLARI: Hareket & Denge | Bölüm: 1</div>
    
    <script>
        const { Engine, Render, Runner, Bodies, Composite, Body } = Matter;

        // 1. Fizik Motoru Ayarları
        const engine = Engine.create();
        const render = Render.create({
            element: document.body,
            engine: engine,
            options: { width: window.innerWidth, height: window.innerHeight, wireframes: false, background: '#111' }
        });

        // 2. Motor ve Tekerlekler (Gövde)
        const bikeBody = Bodies.rectangle(200, 300, 60, 20, { chamfer: { radius: 10 }, render: { fillStyle: '#ff4400' } });
        const frontWheel = Bodies.circle(230, 330, 15, { friction: 0.8, render: { fillStyle: '#fff' } });
        const backWheel = Bodies.circle(170, 330, 15, { friction: 0.8, render: { fillStyle: '#fff' } });
        
        // Tekerlekleri gövdeye sabitle
        const bike = Composite.create();
        Composite.add(bike, [bikeBody, frontWheel, backWheel]);
        
        // Birleştirme (Constraint benzeri sabit tutma)
        const motor = Bodies.rectangle(200, 315, 70, 40, { 
            collisionFilter: { group: -1 }, 
            render: { fillStyle: 'orange' } 
        });

        // 3. Yer ve Engeller (Bölüm Tasarımı)
        const ground = Bodies.rectangle(400, 580, 2000, 60, { isStatic: true, render: { fillStyle: '#333' } });
        const ramp = Bodies.rectangle(600, 530, 200, 20, { isStatic: true, angle: -Math.PI * 0.15, render: { fillStyle: '#555' } });
        const box = Bodies.rectangle(900, 500, 50, 50, { render: { fillStyle: 'yellow' } }); // Kutu engel

        Composite.add(engine.world, [ground, ramp, motor, box]);

        // 4. Kontroller (Klavye)
        const keys = {};
        window.addEventListener("keydown", e => keys[e.code] = true);
        window.addEventListener("keyup", e => keys[e.code] = false);

        Matter.Events.on(engine, 'beforeUpdate', () => {
            if (keys['ArrowRight']) Body.applyForce(motor, motor.position, { x: 0.005, y: 0 });
            if (keys['ArrowLeft']) Body.applyForce(motor, motor.position, { x: -0.005, y: 0 });
            if (keys['ArrowUp']) Body.rotate(motor, 0.05); // Önü kaldır
            if (keys['ArrowDown']) Body.rotate(motor, -0.05); // Arkaya yat
        });

        Render.run(render);
        Runner.run(Runner.create(), engine);
    </script>
</body>
</html>
